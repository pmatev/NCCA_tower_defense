#ifndef MESHLIB_H
#define MESHLIB_H

#include <iostream>
#include <vector>
#include <map>

#include "smartpointers.h"
#include "mesh.h"
#include "renderer.h"

DECLARESMART(MeshLib)

class MeshLib
{
public:
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief MeshLib ctor. Specifies the meshes to be loaded.
  //---------------------------------------------------------
  static MeshLibWPtr instance();
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Initialises the meshlib
  //---------------------------------------------------------
  void init();
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Returns a weakptr to a mesh
  /// @param[in] _name the name of the mesh to return
  //----------------------------------------------------------------------------------------------------------------------
  std::vector<Renderer::vertData> getVertDataFromMesh(std::string _name);
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Dtor
  //----------------------------------------------------------------------------------------------------------------------
  ~MeshLib();
protected:
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Ctor
  //----------------------------------------------------------------------------------------------------------------------
  MeshLib();
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Uses data stored in an OBJ to construct a VAO.
  /// @param[in] _file the OBJ file.
  //----------------------------------------------------------------------------------------------------------------------
  void createMeshFromObj(const std::string& _file, std::string _name);

  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Vector to hold meshes
  //----------------------------------------------------------------------------------------------------------------------
  std::map<std::string, MeshPtr> m_meshes;

  //----------------------------------------------------------------------------------------------------------------------
  /// @brief The istance of the class
  //----------------------------------------------------------------------------------------------------------------------
  static MeshLibPtr s_instance;
};

#endif // MESHLIB_H
